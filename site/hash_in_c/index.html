<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.26.2 by Michael Rose
  Copyright 2013-2024 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->

<html lang="zh" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Hash_in_c - 瓜牛的世界</title>
<meta name="description" content="C语言中巧用哈希 前言  今天在刷 leetcode 的时候遇到一个 简单题目，要求求出字符串中的最大的不重复字符的字串长度。  这个题目本身不难，但是在处理如何判断某个字符是否已经出现过的问题上，就出现了问题。看了下其他语言都可以使用自带的 哈希 来解决这个问题，但是 c 呢，就有点难搞了。当然也有为 c 开发的第三方库，但是如何自己解决呢？——我想的是用数组，没错，就是 整形数组 整体思路    问题转化            将对符号的标记转化为对数字的标记       将对数字的标记再转化为对变量数位的标记——独热           通过位操作完成对某个特定位的标记和检测">


  <meta name="author" content="会飞的瓜牛">
  
  <meta property="article:author" content="会飞的瓜牛">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="zh">
<meta property="og:site_name" content="瓜牛的世界">
<meta property="og:title" content="Hash_in_c">
<meta property="og:url" content="/hash_in_c/">


  <meta property="og:description" content="C语言中巧用哈希 前言  今天在刷 leetcode 的时候遇到一个 简单题目，要求求出字符串中的最大的不重复字符的字串长度。  这个题目本身不难，但是在处理如何判断某个字符是否已经出现过的问题上，就出现了问题。看了下其他语言都可以使用自带的 哈希 来解决这个问题，但是 c 呢，就有点难搞了。当然也有为 c 开发的第三方库，但是如何自己解决呢？——我想的是用数组，没错，就是 整形数组 整体思路    问题转化            将对符号的标记转化为对数字的标记       将对数字的标记再转化为对变量数位的标记——独热           通过位操作完成对某个特定位的标记和检测">







  <meta property="article:published_time" content="2025-01-11T00:00:00+08:00">





  

  


<link rel="canonical" href="/hash_in_c/">












<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="瓜牛的世界 Feed">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single" dir="ltr">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">转到主导航栏</a></li>
    <li><a href="#main" class="screen-reader-shortcut">转到内容</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">转到底部</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          瓜牛的世界
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a
                href="https://www.jekyll.com.cn/docs/"
                
                
              >jekyll教程</a>
            </li><li class="masthead__menu-item">
              <a
                href="https://mmistakes.github.io/minimal-mistakes/docs/quick-start-guide/"
                
                
              >minimal-mistakes指南</a>
            </li><li class="masthead__menu-item">
              <a
                href="/about/"
                
                
              >关于</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">切换菜单</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person" class="h-card">

  

  <div class="author__content">
    <h3 class="author__name p-name" itemprop="name">
      <a class="u-url" rel="me" href="/" itemprop="url">会飞的瓜牛</a>
    </h3>
    
      <div class="author__bio p-note" itemprop="description">
        <p>我的脑子长了翅膀飞走啦，所以我没有脑子啦</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">关注</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name" class="p-locality">云梦泽</span>
        </li>
      

      
        
          
        
          
        
          
        
          
        
          
        
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer me">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Hash_in_c">
    <meta itemprop="description" content="C语言中巧用哈希前言 今天在刷 leetcode 的时候遇到一个 简单题目，要求求出字符串中的最大的不重复字符的字串长度。 这个题目本身不难，但是在处理如何判断某个字符是否已经出现过的问题上，就出现了问题。看了下其他语言都可以使用自带的 哈希 来解决这个问题，但是 c 呢，就有点难搞了。当然也有为 c 开发的第三方库，但是如何自己解决呢？——我想的是用数组，没错，就是 整形数组整体思路  问题转化          将对符号的标记转化为对数字的标记      将对数字的标记再转化为对变量数位的标记——独热        通过位操作完成对某个特定位的标记和检测">
    <meta itemprop="datePublished" content="2025-01-11T00:00:00+08:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">
            <a href="/hash_in_c/" itemprop="url">Hash_in_c
</a>
          </h1>
          

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          2 分钟阅读
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
        <h1 id="c语言中巧用哈希">C语言中巧用哈希</h1>
<h2 id="前言">前言</h2>
<p> 今天在刷 <strong>leetcode</strong> 的时候遇到一个 <a href="https://leetcode.cn/problems/longest-substring-without-repeating-characters/description/">简单题目</a>，要求求出字符串中的最大的不重复字符的字串长度。<br />
 这个题目本身不难，但是在处理如何判断某个字符是否已经出现过的问题上，就出现了问题。看了下其他语言都可以使用自带的 <strong>哈希</strong> 来解决这个问题，但是 c 呢，就有点难搞了。当然也有为 c 开发的第三方库，但是如何自己解决呢？——我想的是用数组，没错，就是 <strong>整形数组</strong></p>
<h2 id="整体思路">整体思路</h2>
<ul>
  <li>问题转化
    <ul>
      <li>将对符号的标记转化为对数字的标记</li>
      <li>将对数字的标记再转化为对变量数位的标记——独热</li>
    </ul>
  </li>
  <li>通过位操作完成对某个特定位的标记和检测</li>
</ul>

<h2 id="原理">原理</h2>
<h3 id="问题转化过程">问题转化过程</h3>
<ul>
  <li>将对<strong>符号</strong>的标记转变为对<strong>数字</strong>的标记<br />
在哈希中，要求键值对之间是1对1的关系。在 ASCII 中，她的编号和符号之间也是一对一的关系。有了这样的对应关系，我们就可以把题目要求的符号的标记问题，转换为对数字的处理。</li>
  <li>将对<strong>数字</strong>的标记转换为对整形变量<strong>位</strong>的标记<br />
如果想标记一个数字，是否出现过，最直接的办法是遍历，一个更快的办法是把数字转变为相应的位，让后通过 <strong>位操作</strong> 来处理，当然，这也是c语言的强项<br />
示例：
    <ol>
      <li>标记数字 8
        <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">hash</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// 初始化</span>
  <span class="n">hash</span> <span class="o">|=</span> <span class="mi">1</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="p">;</span> <span class="c1">//将 hash 的第8为设置为1,表示8存在过了</span>
</code></pre></div>        </div>
      </li>
      <li>判断 8 是否存在
        <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">if</span> <span class="p">(</span><span class="n">hash</span> <span class="o">&amp;</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="p">)</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="p">)</span> <span class="p">{</span>
 <span class="n">printf</span><span class="p">(</span><span class="s">"8 已存在</span><span class="se">\n</span><span class="s">"</span><span class="p">)</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">"8 还未被标记</span><span class="se">\n</span><span class="s">"</span><span class="p">)</span>
  <span class="p">}</span>
</code></pre></div>        </div>
        <h3 id="单个整型变量的局限性">单个整型变量的局限性</h3>
      </li>
    </ol>
  </li>
  <li>无符号整形(unsigned int) 只有32位，那就意味着她能标记的范围是[1~32]——<strong>独热表示法</strong>, 如何标记大于32的数字呢？用数组。
    <h3 id="使用无符号整型数组扩展可以标记的数字的上限">使用无符号整型数组扩展可以标记的数字的上限</h3>
  </li>
  <li>单个变量中标记数字时，可以直接将数字想象称在整型变量中的数位，在数组中，则需要知道应该在数字在整个数组中的数位,那么，可以这么办——通过整除确定数组下标，通过取余知道在整型变量中数位。<br />
示例：标记数字 120
    <ol>
      <li>确定数组大小:120/32 = 3….24，则整型数组大小可谓4</li>
      <li>标记
        <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="mi">120</span> <span class="o">/</span> <span class="mi">32</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">position</span> <span class="o">=</span> <span class="mi">120</span> <span class="o">%</span> <span class="mi">32</span><span class="p">;</span>
  <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">hash</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>
  <span class="n">hash</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">|=</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="p">)</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="n">position</span><span class="p">;</span>
</code></pre></div>        </div>
        <blockquote>
          <h1 id="note">NOTE</h1>
          <ol>
            <li>笔者在处理的过程中使用的是无符号整形变量，当然也可使使用其他类型，诸如<code class="language-plaintext highlighter-rouge">char, shot, long</code>等，处理思路都是一样的
              <h2 id="解题代码">解题代码</h2>
              <h3 id="接口">接口</h3>
              <p>```c
  int s_len; // 字符串长度
  int count; //最长不重复字符串的长度</p>
            </li>
          </ol>
        </blockquote>
      </li>
    </ol>

    <p>// ASSCII码总共128
  // 找偏移位:’x’
  // ‘x’ 字符相对 0 偏移为：’x’ - 0  = 120 -0 = 120
  // 对应 hash[]中字节的位置： index = 120 / 32 = 3
  // 对应 字节中位的位置：position = 120 $ 32 = 24
  // 则 x 可在hash中被标记：hash[index] |= 1«position
  unsigned int hash[4] = {0}; // 哈希 32 x 4 = 128</p>

    <p>count = 0;
  for (s_len = 0; *(s+s_len) != ‘\0’; s_len++); // 获得 s 的长度</p>

    <p>int r_ptr = 0; // 右边界指针
  int index; // 字符的索引
  int position; // 整型变量内部偏移
  char c;
  for (int i = 0; i &lt; s_len; i++) {</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  // 滑动左边界：取消对 s[i-1]的标记
  if (i &gt; 0) {
      c = s[i-1];
      index = (c - 0) / 32;
      position = (c - 0) % 32;
      hash[index] &amp;= ~((unsigned int)1&lt;&lt;position); //将 s[i]存于 hash中
  }

  for (; r_ptr &lt; s_len;) {
      c = s[r_ptr];

      index = (c - 0) / 32;
      position = (c - 0) % 32;
      if (hash[index] &amp; (unsigned int)1&lt;&lt;position) {
          break; //已经被标记过
      } else {
          hash[index] |= (unsigned int)1&lt;&lt;position; //将 s[r_ptr]存于 hash中
          r_ptr++; // 滑动右边界
      }
  }
	
  count = count &gt; r_ptr-i ? count : r_ptr-i;   }
</code></pre></div>    </div>

    <p>return count;
}</p>
  </li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>### 测试 
```c
#include &lt;stdio.h&gt;

struct data_type {
	char* s;
	int expected_value;
};
enum {
	caseBASE = -1,
	case1,
	case2,
	case3,
	case4,
	case5,
	caseTOP
};
struct data_type test_data[] = {
	[case1] = {"abcabcbb", 3},
	[case2] = {"bbbbb", 1},
	[case3] = {"pwwkew", 3},
	[case4] = {"sjdgisgjisg", 5},
	[case5] = {"abcABC,.ab", 8},
};

int main(int argc, char* argv[])
{
	
	char* s = NULL;
	int expected_value = 0;
	int ret = 0;
	for (int i = caseBASE + 1; i &lt; caseTOP; i++) {
		s = test_data[i].s;
		expected_value = test_data[i].expected_value;

		ret = lengthOfLongestSubstring(s);
		printf("testcase No.%d ", i);
		if (ret == expected_value) {
			printf("pass\n");
		} else {
			printf("=========================\n");
			printf("fail:ret=%d\n", ret);
			printf("expected_value:%d\n", expected_value);
			printf("=========================\n");
		}
	}
	return 0;
}
</code></pre></div></div>

        
      </section>

      <footer class="page__meta">
        
        


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> 更新时间:</strong> <time class="dt-published" datetime="2025-01-11T00:00:00+08:00">January 11, 2025</time></p>

      </footer>

      <section class="page__share">
  <h4 class="page__share-title">分享</h4>

  <a href="https://twitter.com/intent/tweet?text=Hash_in_c%20%2Fhash_in_c%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="分享 Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=%2Fhash_in_c%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="分享 Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=/hash_in_c/" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="分享 LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/6/" class="pagination--pager" title="6">上一页</a>
    
    
      <a href="/test-blog/" class="pagination--pager" title="测试博客">下一页</a>
    
  </nav>


    </div>

    
  </article>

  
  
    
<div class="page__related">
  
  <h2 class="page__related-title">猜您还喜欢</h2>
  <div class="grid__wrapper">
    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/test-blog/" rel="permalink">测试博客
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          少于 1 分钟阅读
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">海绵宝宝
简介
《海绵宝宝》（英语：SpongeBob SquarePants，旧译《棉球方块》[b]）是一部美国喜剧动画剧集，自1999年在尼克儿童频道播出至今，是目前尼克频道最长寿的节目，亦是尼克卡通最长寿的卡通，不仅比先前同为尼克卡通的如《尿布一族》、《大头仔天空》、《猫狗》等卡通的集数还多，更是目前集数最...</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/6/" rel="permalink">6
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          少于 1 分钟阅读
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">hello
hello wowrld
hello wowrld
hello wowrld
hello wowrld
hello wowrld
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/5/" rel="permalink">5
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          少于 1 分钟阅读
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">hello
hello wowrld
hello wowrld
hello wowrld
hello wowrld
hello wowrld
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/4/" rel="permalink">4
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          少于 1 分钟阅读
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">hello
hello wowrld
hello wowrld
hello wowrld
hello wowrld
hello wowrld
</p>
  </article>
</div>

    
  </div>
</div>

  
  
</div>

      
    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>关注:</strong></li>
    

    
      
        
      
        
      
        
      
        
      
        
      
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2025 <a href="">瓜牛的世界</a>. 技术来自于 <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/jekyll-themes/minimal-mistakes/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>









  </body>
</html>
